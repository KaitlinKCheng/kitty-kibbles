(function(){"use strict";var t={505:function(t,o,e){var r,n=e(848),a=function(){var t=this,o=t._self._c;return o("b-container",{staticClass:"my-2",attrs:{id:"app"}},[o("b-navbar",{attrs:{variant:"primary"}},[o("b-navbar-nav",[o("b-navbar-brand",{attrs:{to:"/"}},[o("fa-icon",{attrs:{icon:"fa-solid fa-cat"}}),o("span",[t._v(" Kitty Kibbles")])],1)],1)],1),o("router-view")],1)},i=[],s=e(656),d={},c=(0,s.A)(d,a,i,!1,null,null,null),u=c.exports,l=e(178),f=function(){var t=this,o=t._self._c;t._self._setupProxy;return o("FoodPage")},m=[],p=function(){var t=this,o=t._self._c;t._self._setupProxy;return o("b-container",[o("b-col",{staticClass:"mt-3",attrs:{align:"center"}},[o("b-button",{attrs:{variant:"primary",size:"lg"},on:{click:function(o){t.editing=!1,t.showFoodForm()}}},[o("span",[t._v("Add New Food")]),t._v("  "),o("fa-icon",{attrs:{icon:"fa-solid fa-plus"}})],1)],1),o("b-col",{staticClass:"mt-3",attrs:{align:"right"}},[o("b-dropdown",{attrs:{text:"Sort By",variant:"primary",disabled:0===t.getFoodStock.size}},t._l(t.sortOptions,function(e){return o("b-dropdown-item",{key:e.name,on:{click:function(o){return t.sort(e.sortFunc)}}},[t._v(t._s(e.name))])}),1)],1),o("b-row",{attrs:{cols:"1","cols-sm":"2","cols-lg":"3","align-h":"center"}},t._l(t.getFoodStock.values(),function(e){return o("b-col",{key:e.id+e.brand+e.name+e.type+e.size+e.count,staticClass:"my-3"},[o("FoodPageItem",{attrs:{"display-food":e},on:{"edit-food":function(o){return t.editFood(e)},"delete-food":function(o){return t.deleteFood(e)}}})],1)}),1),o("FoodPageForm",{attrs:{"food-item":t.currentFood,editing:t.editing},on:{"done-form":function(o){return t.doneForm()}}})],1)},b=[],h=e(518);(function(t){t["DRY"]="Dry Food",t["WET"]="Wet Food",t["TREATS"]="Treats",t["OTHER"]="Other"})(r||(r={}));const S=-1,k="foodStock",v="nextFoodId";var F={namespaced:!0,state:()=>({foodStock:new Map,nextFoodId:0}),getters:{foodStock:t=>()=>t.foodStock},mutations:{setFoodStock(t,o){t.foodStock=o},setNextFoodId(t,o){t.nextFoodId=o},addFood(t,o){t.foodStock.set(o.key,o.value)},removeFood(t,o){t.foodStock.delete(o)}},actions:{init(t){const o=localStorage.getItem(k);null!==o&&t.commit("setFoodStock",new Map(JSON.parse(o)));const e=localStorage.getItem(v);null!==e&&t.commit("setNextFoodId",JSON.parse(e))},addFood(t,o){let e=!1;return o.id===S&&(o.id=t.state.nextFoodId,t.state.nextFoodId++,t.dispatch("updateLocalStorageFoodId")),t.state.foodStock.has(o.id)||(t.commit("addFood",{key:o.id,value:o}),t.dispatch("updateLocalStorageFoodStock"),e=!0),e},updateFood(t,o){let e=!1;return t.state.foodStock.has(o.id)&&(t.commit("addFood",{key:o.id,value:o}),t.dispatch("updateLocalStorageFoodStock"),e=!0),e},removeFood(t,o){let e=!1;return t.state.foodStock.has(o)&&(t.commit("removeFood",o),t.dispatch("updateLocalStorageFoodStock"),e=!0),e},incrementStock(t,o){const e=t.state.foodStock.get(o.id);void 0!==e&&(e.count=Number(e.count)+Number(o.add)),t.dispatch("updateLocalStorageFoodStock")},decrementStock(t,o){const e=t.state.foodStock.get(o.id);void 0!==e&&(e.count=Number(e.count)-Number(o.sub)),t.dispatch("updateLocalStorageFoodStock")},updateFoodStock(t,o){t.commit("setFoodStock",o),t.dispatch("updateLocalStorageFoodStock")},updateLocalStorageFoodStock(t){localStorage.setItem(k,JSON.stringify([...t.state.foodStock]))},updateLocalStorageFoodId(t){localStorage.setItem(v,JSON.stringify(t.state.nextFoodId))}}};n["default"].use(h.Ay);var g=new h.Ay.Store({modules:{foods:F}});class y{id;brand;name;type;size;count;constructor(t=S,o="Brand",e="Name",n=r.OTHER,a="Size",i=0){this.id=t,this.brand=o,this.name=e,this.type=n,this.size=a,this.count=i}}var _=function(){var t=this,o=t._self._c;t._self._setupProxy;return o("b-modal",{attrs:{id:"formModal",title:t.editing?"Edit Food":"Add New Food"},on:{shown:t.refreshFields,hidden:t.resetFields},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[o("b-button",{attrs:{variant:"primary",disabled:t.submitted&&!t.state},on:{click:function(o){return t.submitForm()}}},[t._v("Submit")])]},proxy:!0}])},[o("b-form",{on:{keydown:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.submitForm()}}},[o("b-form-group",{attrs:{label:"Brand"}},[o("b-form-input",{attrs:{type:"text",placeholder:t.editing&&t.originalFood?.brand?t.originalFood.brand:"Purina",state:t.submitted?t.brandState:null,autofocus:""},model:{value:t.formBrand,callback:function(o){t.formBrand=o},expression:"formBrand"}}),o("b-form-invalid-feedback",[t._v("Please enter a brand.")])],1),o("b-form-group",{attrs:{label:"Name"}},[o("b-form-input",{attrs:{type:"text",placeholder:t.editing&&t.originalFood?.name?t.originalFood.name:"Chicken & Liver",state:t.submitted?t.nameState:null},model:{value:t.formName,callback:function(o){t.formName=o},expression:"formName"}}),o("b-form-invalid-feedback",[t._v("Please enter a name.")])],1),o("b-form-group",{attrs:{label:"Type"}},[o("b-form-radio-group",{model:{value:t.formType,callback:function(o){t.formType=o},expression:"formType"}},t._l(t.foodTypes,function(e){return o("b-form-radio",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),o("b-form-group",{attrs:{label:"Size"}},[o("b-form-input",{attrs:{type:"text",placeholder:t.editing&&t.originalFood?.size?t.originalFood.size:"Small",state:t.submitted?t.sizeState:null},model:{value:t.formSize,callback:function(o){t.formSize=o},expression:"formSize"}}),o("b-form-invalid-feedback",[t._v("Please enter a size.")])],1),o("b-form-group",{attrs:{label:"Available"}},[o("b-form-input",{attrs:{type:"number",min:"0",state:t.submitted?t.countState:null},model:{value:t.formCount,callback:function(o){t.formCount=o},expression:"formCount"}}),o("b-form-invalid-feedback",[t._v("Please enter a positive number.")])],1)],1)],1)},w=[],x=n["default"].extend({name:"FoodPageForm",props:{editing:Boolean,foodItem:y},data(){return{foodTypes:r,formBrand:"",formName:"",formType:Object.values(r)[0],formSize:"",formCount:0,submitted:!1}},computed:{brandState(){return null!==this.formBrand&&""!==this.formBrand},nameState(){return null!==this.formName&&""!==this.formName},sizeState(){return null!==this.formSize&&""!==this.formSize},countState(){return this.formCount>=0},state(){return this.brandState&&this.nameState&&this.sizeState&&this.countState},originalFood(){return this.foodItem}},methods:{show(){this.$bvModal.show("formModal")},submitForm(){if(this.submitted=!0,this.state){if(this.editing){const t=this.originalFood;t.brand=this.formBrand,t.name=this.formName,t.type=this.formType,t.size=this.formSize,t.count=this.formCount,g.dispatch("foods/updateFood",t)}else g.dispatch("foods/addFood",new y(S,this.formBrand,this.formName,this.formType,this.formSize,this.formCount));this.submitted=!1,this.$bvModal.hide("formModal"),this.$emit("done-form")}},resetFields(){this.formBrand="",this.formName="",this.formType=Object.values(r)[0],this.formSize="",this.formCount=0},matchFieldsToFood(){this.formBrand=this.originalFood.brand,this.formName=this.originalFood.name,this.formType=this.originalFood.type,this.formSize=this.originalFood.size,this.formCount=this.originalFood.count},refreshFields(){this.editing?this.matchFieldsToFood():this.resetFields(),this.submitted=!1}}}),C=x,I=(0,s.A)(C,_,w,!1,null,null,null),O=I.exports,N=function(){var t=this,o=t._self._c;t._self._setupProxy;return o("b-container",[o("b-card",{attrs:{"header-bg-variant":"light"},scopedSlots:t._u([{key:"header",fn:function(){return[o("b-container",[o("b-row",{attrs:{"align-h":"between"}},[o("b-col",{attrs:{cols:"8"}},[o("b-row",[o("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.food.name))])]),o("b-row",[o("span",{staticClass:"font-italic"},[t._v(t._s(t.food.brand))])]),o("b-row",[o("span",{staticClass:"font-weight-light"},[t._v(t._s(t.food.type)+", "+t._s(t.food.size))])])],1),o("b-col",{staticClass:"btn-group pl-2",attrs:{cols:"4","align-self":"start"}},[o("b-button",{staticClass:"rounded",attrs:{variant:"secondary"},on:{click:function(o){return t.editFood()}}},[o("fa-icon",{attrs:{icon:"fa-solid fa-pen-to-square"}})],1),o("b-button",{staticClass:"ml-1 rounded",attrs:{variant:"danger"},on:{click:function(o){return t.deleteFood()}}},[o("fa-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)],1)],1)],1)]},proxy:!0}])},[o("b-card-body",[o("b-row",{staticClass:"text-center",attrs:{"align-h":"between"}},[o("b-button",{attrs:{variant:"danger",disabled:t.food.count<=0},on:{click:function(o){return t.decrementStock(1)}}},[o("fa-icon",{attrs:{icon:"fa-solid fa-minus"}})],1),o("span",[t._v(t._s(t.food.count+" remaining"))]),o("b-button",{attrs:{variant:"success"},on:{click:function(o){return t.incrementStock(1)}}},[o("fa-icon",{attrs:{icon:"fa-solid fa-plus"}})],1)],1),o("b-row",{staticClass:"mt-4"},[o("b-button",{staticClass:"w-100",attrs:{id:t.updateStockBtnId,variant:"info"}},[o("span",[t._v("Stock")]),t._v("  "),o("fa-icon",{attrs:{icon:"fa-solid fa-cubes"}})],1),o("b-popover",{attrs:{id:t.updateStockPopoverId,target:t.updateStockBtnId,triggers:"click blur",placement:"bottom"},scopedSlots:t._u([{key:"title",fn:function(){return[o("span",[t._v("Update Stock")]),o("b-button",{staticClass:"close",attrs:{variant:"light","aria-label":"Close"},on:{click:function(o){return t.$root.$emit("bv::hide::popover",t.updateStockPopoverId)}}},[o("fa-icon",{attrs:{icon:"fa-solid fa-times"}})],1)]},proxy:!0}])},[o("b-form",{on:{keydown:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.submitStockUpdate()}}},[o("b-form-group",{attrs:{label:"Add","invalid-feedback":t.addStockInvalidFeedback}},[o("b-form-input",{attrs:{type:"number",min:"0",state:t.addStockState,autofocus:""},model:{value:t.formAddStock,callback:function(o){t.formAddStock=o},expression:"formAddStock"}})],1),o("b-form-group",{attrs:{label:"Remove","invalid-feedback":t.removeStockInvalidFeedback}},[o("b-form-input",{attrs:{type:"number",min:"0",state:t.removeStockState},model:{value:t.formRemoveStock,callback:function(o){t.formRemoveStock=o},expression:"formRemoveStock"}})],1),o("b-button",{attrs:{variant:"primary",disabled:!t.addStockState||!t.removeStockState},on:{click:function(o){return t.submitStockUpdate()}}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)},P=[],z=n["default"].extend({name:"FoodPageItem",props:{displayFood:y},data(){return{formAddStock:0,formRemoveStock:0}},computed:{food(){return this.displayFood},updateStockBtnId(){return this.food.id+"stockBtn"},updateStockPopoverId(){return this.food.id+"popover"},addStockState(){return this.formAddStock>=0},addStockInvalidFeedback(){return this.formAddStock<0?"Please enter a positive number.":""},removeStockState(){return this.formRemoveStock>=0&&this.updatedRemainingStock>=0},removeStockInvalidFeedback(){return this.formRemoveStock<0?"Please enter a positive number.":this.updatedRemainingStock<0?"Remaining stock cannot be negative.":""},updatedRemainingStock(){return Number(this.food.count)+Number(this.formAddStock)-Number(this.formRemoveStock)}},methods:{incrementStock(t){g.dispatch("foods/incrementStock",{id:this.food.id,add:t}),this.$forceUpdate()},decrementStock(t){g.dispatch("foods/decrementStock",{id:this.food.id,sub:t}),this.$forceUpdate()},editFood(){this.$emit("edit-food",this.food)},deleteFood(){this.$emit("delete-food",this.food.id)},submitStockUpdate(){this.addStockState&&this.removeStockState&&(this.incrementStock(this.formAddStock),this.decrementStock(this.formRemoveStock),this.formAddStock=0,this.formRemoveStock=0,this.$root.$emit("bv::hide::popover",this.updateStockPopoverId))}}}),A=z,T=(0,s.A)(A,N,P,!1,null,null,null),B=T.exports,R=e(626),$=e.n(R),L=n["default"].extend({name:"FoodPage",components:{FoodPageForm:O,FoodPageItem:B},created(){g.dispatch("foods/init");let t={name:"Default",sortFunc:function(t){return $().sortBy(t,[t=>t.id])}},o={name:"Brand",sortFunc:function(t){return $().sortBy(t,[t=>t.value.brand.toLowerCase()])}},e={name:"Name",sortFunc:function(t){return $().sortBy(t,[t=>t.value.name.toLowerCase()])}},r={name:"# Remaining",sortFunc:function(t){return $().sortBy(t,[t=>+t.value.count])}};this.sortOptions.push(t),this.sortOptions.push(o),this.sortOptions.push(e),this.sortOptions.push(r)},data(){return{currentFood:new y,editing:!1,sortOptions:new Array}},computed:{getFoodStock(){return g.state.foods.foodStock}},methods:{showFoodForm(){this.$bvModal.show("formModal")},doneForm(){this.$forceUpdate(),this.editing?this.toast("Food successfully updated."):this.toast("Food successfully added."),this.editing=!1},editFood(t){this.currentFood=t,this.editing=!0,this.showFoodForm()},deleteFood(t){this.$bvModal.msgBoxConfirm(`Are you sure you want to delete ${t.brand} – ${t.name}?`,{title:"Delete Food",okVariant:"danger",cancelVariant:"dark"}).then(o=>{o&&(g.dispatch("foods/removeFood",t.id),this.$forceUpdate(),this.toast("Food successfully deleted."))})},sort(t){let o=Array.from(this.getFoodStock,([t,o])=>({id:t,value:o}));o=t(o);const e=new Map(o.map(t=>[t.id,t.value]));g.dispatch("foods/updateFoodStock",e)},toast(t){this.$bvToast.toast(t,{title:"Kitty Kibbles",toaster:"b-toaster-bottom-center",isStatus:!0})}}}),M=L,j=(0,s.A)(M,p,b,!1,null,null,null),E=j.exports,U=n["default"].extend({name:"FoodView",components:{FoodPage:E}}),D=U,J=(0,s.A)(D,f,m,!1,null,null,null),K=J.exports;n["default"].use(l.Ay);const V=[{path:"/",name:"food",component:K}],H=new l.Ay({mode:"history",base:"/kitty-kibbles/",routes:V});var W=H,Y=e(168),q=(e(313),e(292)),G=e(950),Q=e(353);n["default"].config.productionTip=!1,n["default"].use(Y.Ay$),n["default"].component("fa-icon",q.gc),G.Yv.add(Q.m8f,Q.QLR,Q.EZy,Q.GRI,Q.yLS,Q.LFz,Q.kwR),new n["default"]({router:W,store:g,render:t=>t(u)}).$mount("#app")}},o={};function e(r){var n=o[r];if(void 0!==n)return n.exports;var a=o[r]={id:r,loaded:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}e.m=t,function(){var t=[];e.O=function(o,r,n,a){if(!r){var i=1/0;for(u=0;u<t.length;u++){r=t[u][0],n=t[u][1],a=t[u][2];for(var s=!0,d=0;d<r.length;d++)(!1&a||i>=a)&&Object.keys(e.O).every(function(t){return e.O[t](r[d])})?r.splice(d--,1):(s=!1,a<i&&(i=a));if(s){t.splice(u--,1);var c=n();void 0!==c&&(o=c)}}return o}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[r,n,a]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){e.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};e.O.j=function(o){return 0===t[o]};var o=function(o,r){var n,a,i=r[0],s=r[1],d=r[2],c=0;if(i.some(function(o){return 0!==t[o]})){for(n in s)e.o(s,n)&&(e.m[n]=s[n]);if(d)var u=d(e)}for(o&&o(r);c<i.length;c++)a=i[c],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(u)},r=self["webpackChunkkitty_kibbles"]=self["webpackChunkkitty_kibbles"]||[];r.forEach(o.bind(null,0)),r.push=o.bind(null,r.push.bind(r))}();var r=e.O(void 0,[504],function(){return e(505)});r=e.O(r)})();
//# sourceMappingURL=app.88726899.js.map